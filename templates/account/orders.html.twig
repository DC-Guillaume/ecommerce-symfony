{% extends 'base.html.twig' %}

{% block header %}{% endblock %}
{% block topbar %}{% endblock %}
{% block footer %}{% endblock %}

{% block title %}Mes commandes - DiY District{% endblock %}

{% block content %}
<div class="account">
    <h1>Mon compte</h1>
    <div class="parent">
        <div class="child-left">
            <a href="{{ path('account_order')}}" class="btn">Commandes</a>
            <a href="{{ path('account_address')}}" class="btn">Adresses</a>
            <a href="{{ path('account_password')}}" class="btn">Modifier mon mot de passe</a>
        </div>
        <div class="child-right">
            {% if orders|length == 0 %}
                <p>Vous n'avez pas encore de commandes</p>
            {% else %}
            <table class="content-table">
            <thead>
                <tr>
                <th>Date</th>
                <th>Référence</th>
                <th>Produits</th>
                <th>Total</th>
                <th></th>
                </tr>
            </thead>
            <tbody>
            {% for order in orders %}
                <tr>
                    <td>{{order.createdAt|date('d/m/Y')}}</td>
                    <td>{{order.reference}}</td>
                    <td>{{order.orderDetails|length}}</td>
                    <td>{{((order.getTotal + order.deliveryPrice) / 100)|number_format(2, '.',',')}} €</td>
                    <td class="text-right"><a href="{{path('account_order_show', { 'reference': order.reference })}}">Voir commande</a></td>
                </tr>
                {# {{dump(order)}} #}
            {% endfor %}
                {# <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="total">Total:</td>
                    <td class="total">{{(total / 100)|number_format(2, ',','.') }} €</td>
                    <td></td>
                </tr> #}
            </tbody>
            </table>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}